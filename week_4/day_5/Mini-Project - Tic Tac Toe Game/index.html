<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tic Tac Toe</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-blue-500 flex flex-col items-center justify-center min-h-screen text-white">

  <h1 class="text-4xl font-bold mb-6">Tic Tac Toe Game</h1>

  <div class="mb-4 space-x-4">
    <button id="chooseX" class="bg-white text-blue-500 px-4 py-2 rounded font-bold hover:bg-blue-200">Play as X</button>
    <button id="chooseO" class="bg-white text-blue-500 px-4 py-2 rounded font-bold hover:bg-blue-200">Play as O</button>
  </div>

  <div class="mb-4 space-x-4">
    <button id="easy" class="level-btn bg-green-400 px-4 py-2 rounded font-bold hover:brightness-110">Easy</button>
    <button id="hard" class="level-btn bg-red-400 px-4 py-2 rounded font-bold hover:brightness-110">Hard</button>
  </div>


  <div id="board" class="grid grid-cols-3 gap-2 w-64">
    <div class="cell bg-blue-400 h-20 flex items-center justify-center text-3xl font-bold cursor-pointer"></div>
    <div class="cell bg-blue-400 h-20 flex items-center justify-center text-3xl font-bold cursor-pointer"></div>
    <div class="cell bg-blue-400 h-20 flex items-center justify-center text-3xl font-bold cursor-pointer"></div>
    <div class="cell bg-blue-400 h-20 flex items-center justify-center text-3xl font-bold cursor-pointer"></div>
    <div class="cell bg-blue-400 h-20 flex items-center justify-center text-3xl font-bold cursor-pointer"></div>
    <div class="cell bg-blue-400 h-20 flex items-center justify-center text-3xl font-bold cursor-pointer"></div>
    <div class="cell bg-blue-400 h-20 flex items-center justify-center text-3xl font-bold cursor-pointer"></div>
    <div class="cell bg-blue-400 h-20 flex items-center justify-center text-3xl font-bold cursor-pointer"></div>
    <div class="cell bg-blue-400 h-20 flex items-center justify-center text-3xl font-bold cursor-pointer"></div>
  </div>

  <p id="message" class="mt-6 text-xl font-semibold"></p>

  <button id="restart" class="hidden mt-4 bg-white text-blue-500 px-4 py-2 rounded font-bold hover:bg-blue-200">Restart Game</button>

  <script>
    const board = document.querySelectorAll(".cell");
    const message = document.getElementById("message");
    const restartBtn = document.getElementById("restart");
    const winCombos = [
      [0,1,2],[3,4,5],[6,7,8],
      [0,3,6],[1,4,7],[2,5,8],
      [0,4,8],[2,4,6]
    ];

    const levelBtns = document.querySelectorAll(".level-btn");
    let gameActive = false;
    let userSymbol = '';
    let computerSymbol = '';
    let level = 'easy';
    let boardState = Array(9).fill('');

 
    document.getElementById('chooseX').onclick = () => startGame('X');
    document.getElementById('chooseO').onclick = () => startGame('O');

    document.getElementById('easy').onclick = () => changeLevel('easy');
    document.getElementById('hard').onclick = () => changeLevel('hard');

    restartBtn.onclick = resetGame;

    function highlightLevel() {
      levelBtns.forEach(btn => btn.classList.remove('ring-4', 'ring-white', 'scale-110'));
      document.getElementById(level).classList.add('ring-4', 'ring-white', 'scale-110');
    }

    function changeLevel(newLevel) {
      level = newLevel;
      highlightLevel();
      if (gameActive) {
        message.textContent = `You are ${userSymbol} (${level} mode)`;
      }
    }

    function startGame(symbol) {
      userSymbol = symbol;
      computerSymbol = symbol === 'X' ? 'O' : 'X';
      gameActive = true;
      message.textContent = `You are ${userSymbol} (${level} mode)`;
      board.forEach(cell => cell.addEventListener('click', userMove));
    }

    function userMove(e) {
      const index = [...board].indexOf(e.target);
      if (!boardState[index] && gameActive) {
        boardState[index] = userSymbol;
        e.target.textContent = userSymbol;
        if (checkWinner(userSymbol)) return endGame(`ðŸŽ‰ You win!`);
        if (boardState.every(cell => cell)) return endGame("ðŸ¤ It's a tie!");
        setTimeout(computerMove, 700);
      }
    }

    function computerMove() {
      let emptyCells = boardState
        .map((v,i) => v === '' ? i : null)
        .filter(v => v !== null);
      
      let move;
      if (level === 'easy') {
        move = emptyCells[Math.floor(Math.random() * emptyCells.length)];
      } else {
        move = findBestMove() ?? emptyCells[Math.floor(Math.random() * emptyCells.length)];
      }

      boardState[move] = computerSymbol;
      board[move].textContent = computerSymbol;
      if (checkWinner(computerSymbol)) return endGame("ðŸ’» Computer wins!");
      if (boardState.every(cell => cell)) return endGame("ðŸ¤ It's a tie!");
    }

    function findBestMove() {
      for (let combo of winCombos) {
        const [a,b,c] = combo;
        const line = [boardState[a], boardState[b], boardState[c]];
        if (line.filter(v => v === userSymbol).length === 2 && line.includes('')) {
          return combo[line.indexOf('')];
        }
      }
      return null;
    }

    function checkWinner(symbol) {
      return winCombos.some(combo => combo.every(i => boardState[i] === symbol));
    }

    function endGame(msg) {
      message.textContent = msg;
      gameActive = false;
      restartBtn.classList.remove('hidden');
      board.forEach(cell => cell.removeEventListener('click', userMove));
    }

    function resetGame() {
      boardState.fill('');
      board.forEach(c => c.textContent = '');
      message.textContent = '';
      restartBtn.classList.add('hidden');
      gameActive = false;
    }

    
    highlightLevel();
  </script>

</body>
</html>
