<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Giphy Search</title>
  <style>
    body { font-family: Arial; text-align: center; margin-top: 20px; }
    img { width: 200px; margin: 10px; }
    button { margin: 10px; padding: 8px 16px; cursor: pointer; }
  </style>
</head>
<body>

  <h1>Search Gifs</h1>

  <form id="gifForm">
    <input type="text" id="searchInput" placeholder="Enter category" required>
    <button type="submit">Search</button>
  </form>

  <button id="deleteBtn">Delete All GIFs</button>

  <div id="gifContainer"></div>

  <script>
    // Exercise 1:
    // const API_KEY = "PNkmJUItWHZrGVUlgihh5GpbQ85hwhGZ"; 
    // const form = document.getElementById("gifForm");
    // const input = document.getElementById("searchInput");
    // const container = document.getElementById("gifContainer");
    // const deleteBtn = document.getElementById("deleteBtn");

    // form.addEventListener("submit", async (e) => {
    //   e.preventDefault();
    //   const query = input.value.trim();
    //   if (!query) return;

    //   try {
    //     const response = await fetch(`https://api.giphy.com/v1/gifs/search?api_key=${API_KEY}&q=${query}&limit=10&rating=g`);
    //     if (!response.ok) throw new Error("Network error");
    //     const data = await response.json();

    //     data.data.forEach(gif => {
    //       const img = document.createElement("img");
    //       img.src = gif.images.fixed_height.url;
    //       container.appendChild(img);
    //     });
    //   } catch (error) {
    //     console.log("Error fetching GIFs:", error);
    //   }
    // });

    // deleteBtn.addEventListener("click", () => {
    //   container.innerHTML = "";
    // });

    // ********************************
    // Exercise 3:

    let resolveAfter2Seconds = function () {
    console.log("starting slow promise");
    return new Promise(resolve => {
        setTimeout(function () {
            resolve("slow");
            console.log("slow promise is done");
        }, 2000);
    });
};

let resolveAfter1Second = function () {
    console.log("starting fast promise");
    return new Promise(resolve => {
        setTimeout(function () {
            resolve("fast");
            console.log("fast promise is done");
        }, 1000);
    });
};

let concurrentPromise = function () {
    console.log('==CONCURRENT START with Promise.all==');
    return Promise.all([resolveAfter2Seconds(), resolveAfter1Second()]).then((messages) => {
        console.log(messages[0]); // "slow"
        console.log(messages[1]); // "fast"
    });
}

setTimeout(concurrentPromise, 1000);
// Explanation:
//Promise.all executes both promises in parallel.
// resolveAfter1Second finishes first, but messages[0] corresponds to the first promise (slow), messages[1] corresponds to the second (fast).

// Output:
// ==CONCURRENT START with Promise.all==
// starting slow promise
// starting fast promise
// fast promise is done
// slow promise is done
// slow
// fast

// ****************************************

// Exercise 3:
let resolveAfter2Seconds = function () {
    console.log("starting slow promise");
    return new Promise(resolve => {
        setTimeout(function () {
            resolve("slow");
            console.log("slow promise is done");
        }, 2000);
    });
};

let resolveAfter1Second = function () {
    console.log("starting fast promise");
    return new Promise(resolve => {
        setTimeout(function () {
            resolve("fast");
            console.log("fast promise is done");
        }, 1000);
    });
};

let parallel = async function () {
    console.log('==PARALLEL with await Promise.all==');
    await Promise.all([
        (async () => console.log(await resolveAfter2Seconds()))(),
        (async () => console.log(await resolveAfter1Second()))()
    ]);
}

setTimeout(parallel, 5000);

// Explanation:

// Both promises start in parallel using Promise.all.
// Each async IIFE waits for its respective promise.
// Output will be similar to Exercise 2 :

// ==PARALLEL with await Promise.all==
// starting slow promise
// starting fast promise
// fast promise is done
// slow promise is done
// slow
// fast

// *********************************************************

// Exercase 4:

let resolveAfter2Seconds = function () {
    console.log("starting slow promise");
    return new Promise(resolve => {
        setTimeout(function () {
            resolve("slow");
            console.log("slow promise is done");
        }, 2000);
    });
};

let resolveAfter1Second = function () {
    console.log("starting fast promise");
    return new Promise(resolve => {
        setTimeout(function () {
            resolve("fast");
            console.log("fast promise is done");
        }, 1000);
    });
};

let parallelPromise = function () {
    console.log('==PARALLEL with Promise.then==');
    resolveAfter2Seconds().then((message) => console.log(message));
    resolveAfter1Second().then((message) => console.log(message));
}

setTimeout(parallelPromise, 13000);

// Explanation:

// Each promise executes in parallel.

// .then() prints the message immediately when its promise resolves
// Output:

// ==PARALLEL with Promise.then==
// starting slow promise
// starting fast promise
// fast promise is done
// slow promise is done
// fast
// slow


  </script>
</body>
</html>
